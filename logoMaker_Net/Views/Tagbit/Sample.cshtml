@{
    Layout = null;
}
@*<style>
    .container {
        position: relative;
        text-align: center;
        color: white;
    }

    .bottom-left {
        position: absolute;
        bottom: 8px;
        left: 16px;
    }

    .top-left {
        position: absolute;
        top: 8px;
        left: 16px;
    }

    .top-right {
        position: absolute;
        top: 8px;
        right: 16px;
    }

    .bottom-right {
        position: absolute;
        bottom: 8px;
        right: 16px;
    }

    .centered {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
</style>
<div id="content"
         style='position:absolute; width:600px; height:400px; left:100px; border:solid;'></div>

    <script src="~/js/jquery.js"></script>
    <script src="~/js/jquery-ui.min.js"></script>
    <script src="~/js/Editor.js"></script>
    <script>
        $(document).ready(function () {
            $('#content').Scribble().change(function () {
               // $('#res').html($(this).Scribble('toText', 'svg'));
                //$('#tshirtimg').Scribble('toText', 'png', function (img) {
                //    $('#tshirtimg').attr('src', img);
                //});

                $(this).Scribble('toText', 'png', function (img) {
                    $('#img').attr('src', img);
                });
            });
        });
    </script>*@
   @**<img id='tshirtimg' src="~/img/product/NBluePTshirtFront.jpg" style='border:solid;position:absolute; top:450px; left:5px; width:200px; height:130px;'>
    <div id='res' style='border:solid;position:absolute; top:450px; left:210px;'></div>*@
    @*<br /><br /><br /><br />
                      <div>
                          <div class="container">
                              <img src="~/img/product/NBluePTshirtFront.jpg" alt="Snow" style="width:40%;">
                              <div class="bottom-left">
                                  <img id='img' alt="Snow" style="width:20%;">
                              </div>
                          </div>
                      </div>*@
@*<div class="controls">
    <p>
        <button id="add" onclick="Add()">Add a rectangle</button>
    </p>
</div>
<canvas id="c" width="400" height="300" style="border:1px solid #ccc"></canvas>

<script src="https://cdn.jsdelivr.net/npm/fabric"></script>
<script>
    var canvas = this.__canvas = new fabric.Canvas('c');
    // create a rect object
    var deleteIcon = "data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E";

    var img = document.createElement('img');
    img.src = deleteIcon;

    fabric.Object.prototype.transparentCorners = false;
    fabric.Object.prototype.cornerColor = 'blue';
    fabric.Object.prototype.cornerStyle = 'circle';

    function Add() {
        var rect = new fabric.Rect({
            left: 100,
            top: 50,
            fill: 'yellow',
            width: 200,
            height: 100,
            objectCaching: false,
            stroke: 'lightgreen',
            strokeWidth: 4,
        });

        var line = new fabric.line({
            left: 100,
            top: 50,
            fill: 'yellow',
            width: 200,
            height: 100,
            objectCaching: false,
            stroke: 'lightgreen',
            strokeWidth: 4,
        });

        canvas.add(rect);
        canvas.setActiveObject(rect);
    }

    fabric.Object.prototype.controls.deleteControl = new fabric.Control({
        x: 0.5,
        y: -0.5,
        offsetY: 16,
        cursorStyle: 'pointer',
        mouseUpHandler: deleteObject,
        render: renderIcon,
        cornerSize: 24
    });

    Add();

    function deleteObject(eventData, transform) {
        var target = transform.target;
        var canvas = target.canvas;
        canvas.remove(target);
        canvas.requestRenderAll();
    }

    function renderIcon(ctx, left, top, styleOverride, fabricObject) {
        var size = this.cornerSize;
        ctx.save();
        ctx.translate(left, top);
        ctx.rotate(fabric.util.degreesToRadians(fabricObject.angle));
        ctx.drawImage(img, -size / 2, -size / 2, size, size);
        ctx.restore();
    }
</script>*@


<html>
<head>
    <link href="~/libr/style.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script>
        jQuery.fn.outerHTML = function () {
            return jQuery('<div />').append(this.eq(0).clone()).html();
        };
        Number.prototype.countDecimals = function () {
            if (Math.floor(this.valueOf()) === this.valueOf()) return 0;
            return this.toString().split(".")[1].length || 0;
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/3.6.3/fabric.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2/dist/spectrum.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/spectrum-colorpicker2/dist/spectrum.min.css">

    <script src="~/libr/grapick.min.js"></script>
    <link href="~/libr/grapick.min.css" rel="stylesheet" />
    <script src="~/libr/undo-redo-stack.js"></script>

    <script src="~/libr/core.js"></script>
    <script src="~/libr/toolbar.js"></script>
    <script src="~/libr/canvas.js"></script>
    <script src="~/libr/shapes.js"></script>

    <script src="~/libr/freeDrawSettings.js"></script>
    <script src="~/libr/canvasSettings.js"></script>
    <script src="~/libr/selectionSettings.js"></script>

    <script src="~/libr/drawingLine.js"></script>
    <script src="~/libr/drawingPath.js"></script>
    <script src="~/libr/drawingText.js"></script>
    <script src="~/libr/tip.js"></script>
    <script src="~/libr/upload.js"></script>
    <script src="~/libr/copyPaste.js"></script>

    <script src="~/libr/utils.js"></script>
    <script src="~/libr/zoom.js"></script>
    <script src="~/libr/saveInBrowser.js"></script>
<script src="~/libr/html2canvas.min.js"></script>
    <script type="text/javascript">
        function capture() {
            html2canvas(document.getElementById("preview")).then(function (canvas) {
                var anchorTag = document.createElement("a");
                document.body.appendChild(anchorTag);
                document.getElementById("dummy").appendChild(canvas);
                anchorTag.download = "filename.jpg";
                anchorTag.href = canvas.toDataURL();
                anchorTag.target = '_blank';
                anchorTag.click();
            });
        }
    </script>
    <style>
      
    </style>

</head>
<body>
    <div id="image-editor-container"></div>

    <div id="preview" style="background-image: url('~/img/product/GreyTTopFront.jpg'); background-repeat: no-repeat; background-size: cover; width: 500px; ">
        <img id="previewimg" />
    </div>

    <button id="SaveTshirt" onclick="capture()">Save</button>
    <div id="dummy"></div>
    <script src="~/libr/script.js"></script>

</body>
@*<img src="~/img/product/5.png" />*@

</html>